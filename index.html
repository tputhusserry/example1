<!DOCTYPE html>
<html>
<head>
  <title>Create a Map</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=7, IE=9, IE=10">
  <link rel="stylesheet" href="http://js.arcgis.com/3.6/js/dojo/dijit/themes/claro/claro.css">
  <link rel="stylesheet" href="http://js.arcgis.com/3.6/js/esri/css/esri.css">
  <style>
    html, body, #mapDiv{
      padding: 0;
      margin: 0;
      height: 100%;
    }
  </style>
  
  <script src="http://js.arcgis.com/3.6/"></script>
  <script>
   
    require(["esri/map", "esri/dijit/BasemapGallery", "esri/arcgis/utils", "dojo/parser", "dijit/layout/BorderContainer", 
    "dijit/layout/ContentPane", "dijit/TitlePane",  "dojo/domReady!"],
   function (Map, BasemapGallery, arcgisUtils, parser) {
     parser.parse();
      var map = new esri.Map("mapDiv", {
        center: [-0.54, 51.485],
        zoom: 6,
        basemap: "osm"
      });
      
      var basemapGallery = new BasemapGallery({
        showArcGISBasemaps: true,
        map: map
        }, "bmg");
        basemapGallery.startup();
      
      var opLayer = new esri.layers.ArcGISDynamicMapServiceLayer("http://maps.groundwork.org.uk/arcgis/rest/services/GWL/LondonKeyStat3/MapServer", {"opacity":0.5});
      
      opLayer.setVisibleLayers([0,7]);
      map.addLayer(opLayer);
	 
      
        
  });
    
  
  </script>

</head>
<body class="claro">
  
  <div data-dojo-type="dijit/layout/BorderContainer" 
         data-dojo-props="design:'headline', gutters:false" 
         style="width:80%;height:80%;margin:50;">
         
  <div id="mapDiv"
            data-dojo-type="dijit/layout/ContentPane" 
           data-dojo-props="region:'center'" 
           style="padding:0;">
           
            <div style="position:absolute; right:10px; top:10px; z-Index:999;">
          <div data-dojo-type="dijit/TitlePane" 
               data-dojo-props="title:'Switch Basemap', closable:true,  open:true">
            <div data-dojo-type="dijit/layout/ContentPane" style="width:280px; height:180px; overflow:auto;">
            <div id="bmg" ></div></div>
          </div>
        </div>
  </div>
  </div>
</body>
</html>